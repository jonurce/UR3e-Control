<?xml version="1.0"?>
<robot name="ur3e_2fg7" xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- Define world link -->
  <link name="world"/>

  <!-- UR3e links with STL meshes -->
  <link name="base_link"/>
  <link name="base_link_inertia">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/base.stl"/>
      </geometry>
      <material name="grey">
        <color rgba="0.5 0.5 0.5 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/base.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="2.0"/>
      <inertia ixx="0.0030531654454" ixy="0.0" ixz="0.0" iyy="0.0030531654454" iyz="0.0" izz="0.005625"/>
    </inertial>
  </link>

  <link name="shoulder_link">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/shoulder.stl"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/shoulder.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.98"/>
      <origin rpy="1.570796326794897 0 0" xyz="0.0 0.0 -0.02"/>
      <inertia ixx="0.002767" ixy="1e-05" ixz="-1.5e-05" iyy="0.00215" iyz="0.000187" izz="0.002564"/>
    </inertial>
  </link>

  <link name="upper_arm_link">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/upperarm.stl"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/upperarm.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="3.4445"/>
      <origin rpy="0 0 0" xyz="-0.11355 0.0 0.1157"/>
      <inertia ixx="0.004268" ixy="-4.1e-05" ixz="-0.001508" iyy="0.046079" iyz="-1.3e-05" izz="0.044943"/>
    </inertial>
  </link>

  <link name="forearm_link">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/forearm.stl"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/forearm.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.437"/>
      <origin rpy="0 0 0" xyz="-0.1632 0.0 0.0238"/>
      <inertia ixx="0.001089" ixy="0" ixz="-9e-06" iyy="0.011485" iyz="2e-06" izz="0.011204"/>
    </inertial>
  </link>

  <link name="wrist_1_link">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/wrist1.stl"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/wrist1.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.871"/>
      <origin rpy="1.570796326794897 0 0" xyz="0.0 -0.01 0.0"/>
      <inertia ixx="0.001008" ixy="-1e-06" ixz="1e-06" iyy="0.000822" iyz="0.000133" izz="0.000603"/>
    </inertial>
  </link>

  <link name="wrist_2_link">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/wrist2.stl"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/wrist2.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.805"/>
      <origin rpy="-1.570796326794897 0 0" xyz="0.0 0.01 0.0"/>
      <inertia ixx="0.000641" ixy="-1e-06" ixz="2e-06" iyy="0.000619" iyz="-2.6e-05" izz="0.000386"/>
    </inertial>
  </link>

  <link name="wrist_3_link">
    <visual>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/wrist3.stl"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://ur_description/meshes/ur3e/collision/wrist3.stl"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.261"/>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.02"/>
      <inertia ixx="0.000548" ixy="2e-06" ixz="-2e-06" iyy="0.000274" iyz="-0.000197" izz="0.000412"/>
    </inertial>
  </link>

  <link name="ft_frame"/>
  <link name="base"/>
  <link name="flange"/>
  <link name="tool0"/>

  <!-- UR3e joints -->
  <joint name="base_joint" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="base_link-base_link_inertia" type="fixed">
    <parent link="base_link"/>
    <child link="base_link_inertia"/>
    <origin rpy="0 0 3.141592653589793" xyz="0 0 0"/>
  </joint>

  <joint name="shoulder_pan_joint" type="revolute">
    <parent link="base_link_inertia"/>
    <child link="shoulder_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.15185"/>
    <axis xyz="0 0 1"/>
    <limit effort="54.0" lower="-6.283185307179586" upper="6.283185307179586" velocity="3.141592653589793"/>
  </joint>

  <joint name="shoulder_lift_joint" type="revolute">
    <parent link="shoulder_link"/>
    <child link="upper_arm_link"/>
    <origin rpy="1.570796327 0 0" xyz="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="54.0" lower="-6.283185307179586" upper="6.283185307179586" velocity="3.141592653589793"/>
  </joint>

  <joint name="elbow_joint" type="revolute">
    <parent link="upper_arm_link"/>
    <child link="forearm_link"/>
    <origin rpy="0 0 0" xyz="-0.24355 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="28.0" lower="-3.141592653589793" upper="3.141592653589793" velocity="3.141592653589793"/>
  </joint>

  <joint name="wrist_1_joint" type="revolute">
    <parent link="forearm_link"/>
    <child link="wrist_1_link"/>
    <origin rpy="0 0 0" xyz="-0.2132 0 0.13105"/>
    <axis xyz="0 0 1"/>
    <limit effort="9.0" lower="-6.283185307179586" upper="6.283185307179586" velocity="6.283185307179586"/>
  </joint>

  <joint name="wrist_2_joint" type="revolute">
    <parent link="wrist_1_link"/>
    <child link="wrist_2_link"/>
    <origin rpy="1.570796327 0 0" xyz="0 -0.08535 -1.750557762378351e-11"/>
    <axis xyz="0 0 1"/>
    <limit effort="9.0" lower="-6.283185307179586" upper="6.283185307179586" velocity="6.283185307179586"/>
  </joint>

  <joint name="wrist_3_joint" type="continuous">
    <parent link="wrist_2_link"/>
    <child link="wrist_3_link"/>
    <origin rpy="1.570796326589793 3.141592653589793 3.141592653589793" xyz="0 0.0921 -1.8890025766262e-11"/>
    <axis xyz="0 0 1"/>
    <limit effort="9.0" velocity="6.283185307179586"/>
  </joint>

  <joint name="wrist_3_link-ft_frame" type="fixed">
    <parent link="wrist_3_link"/>
    <child link="ft_frame"/>
    <origin rpy="3.141592653589793 0 0" xyz="0 0 0"/>
  </joint>

  <joint name="base_link-base_fixed_joint" type="fixed">
    <parent link="base_link"/>
    <child link="base"/>
    <origin rpy="0 0 3.141592653589793" xyz="0 0 0"/>
  </joint>

  <joint name="wrist_3-flange" type="fixed">
    <parent link="wrist_3_link"/>
    <child link="flange"/>
    <origin rpy="0 -1.5707963267948966 -1.5707963267948966" xyz="0 0 0"/>
  </joint>

  <joint name="flange-tool0" type="fixed">
    <parent link="flange"/>
    <child link="tool0"/>
    <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="0 0 0"/>
  </joint>

  <!-- Define 2FG7 Gripper -->
  <link name="gripper_base">
    <visual>
      <geometry>
        <box size="0.05 0.05 0.02"/>
      </geometry>
      <material name="grey">
        <color rgba="0.5 0.5 0.5 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.05 0.05 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="ee_to_gripper" type="fixed">
    <parent link="tool0"/>
    <child link="gripper_base"/>
    <origin rpy="0 0 0" xyz="0 0 0.05"/>
  </joint>

  <link name="gripper_left_finger">
    <visual>
      <geometry>
        <box size="0.01 0.04 0.02"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.01 0.04 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>

  <link name="gripper_right_finger">
    <visual>
      <geometry>
        <box size="0.01 0.04 0.02"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.01 0.04 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>

  <joint name="gripper_left_joint" type="prismatic">
    <parent link="gripper_base"/>
    <child link="gripper_left_finger"/>
    <origin rpy="0 0 0" xyz="0 0.02 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" lower="-0.035" upper="0.035" velocity="0.1"/>
  </joint>

  <joint name="gripper_right_joint" type="prismatic">
    <parent link="gripper_base"/>
    <child link="gripper_right_finger"/>
    <origin rpy="0 0 0" xyz="0 -0.02 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" lower="-0.035" upper="0.035" velocity="0.1"/>
  </joint>

  <!-- Define L515 Camera -->
  <link name="l515_base">
    <visual>
      <geometry>
        <box size="0.03 0.03 0.02"/>
      </geometry>
      <material name="black">
        <color rgba="0.0 0.0 0.0 1.0"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.03 0.03 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
  </link>
  <joint name="gripper_to_l515" type="fixed">
    <parent link="gripper_base"/>
    <child link="l515_base"/>
    <origin rpy="0 0 0" xyz="0 0 0.03"/>
  </joint>
</robot>