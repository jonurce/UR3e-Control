<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro" name="2fg7_outwards">
    <!-- parameters -->
    <xacro:arg name="use_fake_hardware" default="true" />

    <!-- If visualizing just the gripper with no arm, set the true, otherwise, set to false -->
    <xacro:property name="gripper_only" value="false"/>

    <xacro:macro name="2fg7_outwards" params="
        name
        prefix
        parent
        *origin
        sim_ignition:=false
        sim_isaac:=false
        use_fake_hardware:=false
        fake_sensor_commands:=false
        include_ros2_control:=true
        com_port:=/dev/ttyUSB0">

        <!-- COMMENTED ROS 2 CONTROL FOR LATER -->

        <!-- ros2 control include -->
        <!-- <xacro:include filename="$(find robotiq_description)/urdf/robotiq_gripper.ros2_control.xacro" /> -->
        <!-- if we are simulating or directly communicating with the gripper we need a ros2 control instance -->
        <!--
        <xacro:if value="${include_ros2_control}">
            <xacro:robotiq_gripper_ros2_control
                name="${name}" prefix="${prefix}"
                sim_ignition="${sim_ignition}"
                sim_isaac="${sim_isaac}"
                use_fake_hardware="${use_fake_hardware}"
                fake_sensor_commands="${fake_sensor_commands}"
                com_port="${com_port}"/>
        </xacro:if>
        -->

        <link name="${prefix}2fg7_base_link">
            <visual>
                <geometry>
                    <mesh filename="package://ur_robotiq_description/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://ur_robotiq_description/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision>
            <inertial>
                <origin xyz="-4.898915958379213e-05 2.84756960271082e-06 0.06811082379774974" rpy="0 0 0" />
                <mass value="1.2646523179240972"/>
                <inertia ixx="0.001504" ixy="-0.0" ixz="-3e-06" iyy="0.001812" iyz="0.0" izz="0.001053"/>
            </inertial>
        </link>

        <link name="${prefix}2fg7_left_finger_link">
            <visual>
                <geometry>
                    <mesh filename="package://ur_robotiq_description/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://ur_robotiq_description/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision>
            <inertial>
                <origin xyz="-4.898915958379213e-05 2.84756960271082e-06 0.06811082379774974" rpy="0 0 0" />
                <mass value="1.2646523179240972"/>
                <inertia ixx="0.001504" ixy="-0.0" ixz="-3e-06" iyy="0.001812" iyz="0.0" izz="0.001053"/>
            </inertial>
        </link>

        <link name="${prefix}2fg7_right_finger_link">
            <visual>
                <geometry>
                    <mesh filename="package://ur_robotiq_description/meshes/right_finger_link.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </visual>
            <collision>
                <geometry>
                    <mesh filename="package://ur_robotiq_description/meshes/right_finger_link.stl" scale="0.001 0.001 0.001"/>
                </geometry>
            </collision>
            <inertial>
                <origin xyz="0.017874296677847158 0.02949104051991925 0.01523421548622829" rpy="0 0 0" />
                <mass value="0.023219383355922288"/>
                <inertia ixx="6e-06" ixy="-0.0" ixz="1e-06" iyy="5e-06" iyz="-0.0" izz="2e-06"/>
            </inertial>
        </link>

        <joint name="${prefix}2fg7_base_joint" type="fixed">
            <parent link="tool0" />
            <child link="${prefix}2fg7_base_link" />
            <xacro:insert_block name="origin" />
        </joint>

        <joint name="${prefix}2fg7_left_finger_joint" type="prismatic">
            <parent link="${prefix}2fg7_base_link" />
            <child link="${prefix}2fg7_left_finger_link" />
            <axis xyz="-1 0 0" />
            <origin xyz="0.032239 -0.029494 0.12005" rpy="0 0 0" />
            <limit lower="0.0" upper="0.019" velocity="0.45" effort="140" />
        </joint>

        <joint name="${prefix}2fg7_right_finger_joint" type="prismatic">
            <parent link="${prefix}2fg7_base_link" />
            <child link="${prefix}2fg7_right_finger_link" />
            <axis xyz="1 0 0" />
            <origin xyz="-0.054361 -0.029494 0.12005" rpy="0 0 0" />
            <limit lower="-0.019" upper="0.019" velocity="0.45" effort="140" />
            <mimic joint="2fg7_left_finger_joint" multiplier="1.0"/>
        </joint>

    </xacro:macro>

    <!--
    <xacro:if value="${gripper_only}">
    	<link name="base_link" />
    	<xacro:2fg7_outwards name="Onrobot2FG7GripperHardwareInterface" prefix="" parent="base_link" use_fake_hardware="$(arg use_fake_hardware)">
        	<origin xyz="0 0 0" rpy="0 0 0" />
    	</xacro:2fg7_outwards>
    </xacro:if>

    <xacro:if value="${not gripper_only}">
    	<xacro:2fg7_outwards name="Onrobot2FG7GripperHardwareInterface" prefix="" parent="tool0" use_fake_hardware="$(arg use_fake_hardware)">
        	<origin xyz="0 0 0" rpy="0 0 0" />
    	</xacro:2fg7_outwards>
    </xacro:if>
    -->


</robot>